<div class="table-container">
  <table class="admin-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Usuario</th>
        <th>Fecha</th>
        <th>Entrada</th>
        <th>Salida</th>
        <th>Horas Totales</th>
        <th>Estado</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let asistencia of asistencias; let i = index">
        <td>{{ obtenerIndice(i) }}</td>
        <td>{{ asistencia.nombreCompleto }}</td>
        <td>{{ formatearFecha(asistencia.fecha) }}</td>
        <td>{{ formatearHora(asistencia.horaEntrada) }}</td>
        <td>{{ formatearHora(asistencia.horaSalida) }}</td>
        <td>{{ calcularHorasTrabajadas(asistencia.horaEntrada, asistencia.horaSalida) }}</td>
        <td>
          <span class="status" [ngClass]="obtenerClaseEstado(asistencia.estado)">
            {{ obtenerTextoEstado(asistencia.estado) }}
          </span>
        </td>
        <td>
          <button class="btn-action edit" title="Editar" (click)="editarAsistencia(asistencia)">
            ‚úèÔ∏è
          </button>
          <button class="btn-action delete" title="Eliminar" (click)="eliminarAsistencia(asistencia.id!)">
            üóëÔ∏è
          </button>
          <button class="btn-action view" title="Ver Detalle" (click)="verDetalleAsistencia(asistencia)">
            üëÅÔ∏è
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Modal Ver Detalle -->
<div *ngIf="mostrarModalDetalle && asistenciaSeleccionada" class="modal-overlay" (click)="cerrarModalDetalle()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <h3>Detalle de Asistencia</h3>
    <div class="detalle-info">
      <div class="info-row">
        <strong>Usuario:</strong>
        <span>{{ asistenciaSeleccionada.nombreCompleto }}</span>
      </div>
      <div class="info-row">
        <strong>Fecha:</strong>
        <span>{{ formatearFecha(asistenciaSeleccionada.fecha) }}</span>
      </div>
      <div class="info-row">
        <strong>Hora de Entrada:</strong>
        <span>{{ formatearHora(asistenciaSeleccionada.horaEntrada) }}</span>
      </div>
      <div class="info-row">
        <strong>Hora de Salida:</strong>
        <span>{{ formatearHora(asistenciaSeleccionada.horaSalida) }}</span>
      </div>
      <div class="info-row">
        <strong>Horas Totales:</strong>
        <span>{{ calcularHorasTrabajadas(asistenciaSeleccionada.horaEntrada, asistenciaSeleccionada.horaSalida) }}</span>
      </div>
      <div class="info-row">
        <strong>Estado:</strong>
        <span class="status" [ngClass]="obtenerClaseEstado(asistenciaSeleccionada.estado)">
          {{ obtenerTextoEstado(asistenciaSeleccionada.estado) }}
        </span>
      </div>
      <div class="info-row" *ngIf="asistenciaSeleccionada.observaciones">
        <strong>Observaciones:</strong>
        <span>{{ asistenciaSeleccionada.observaciones }}</span>
      </div>
    </div>
    <div class="form-actions">
      <button type="button" class="btn secondary" (click)="cerrarModalDetalle()">‚úñÔ∏è Cerrar</button>
    </div>
  </div>
</div>